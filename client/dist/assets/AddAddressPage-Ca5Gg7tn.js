import{aa as y,ab as r,ah as v,ai as A,O as w,o as L,ae as C,af as E,r as S,j as e,ag as d,aj as F,l as M,z as m}from"./index-199rnzlN.js";import{b as k,c as q,d as I}from"./addressHooks-CexdfvMn.js";import{A as P}from"./arrow-left-BFvSMHxI.js";const D=y({firstName:r().trim().min(1,"First name is required").max(25,"Maximum 25 characters allowed"),lastName:r().trim().min(1,"Last name is required").max(25,"Maximum 25 characters allowed"),pinCode:r().trim().regex(/^\d{6}$/,"Pin code must be 6 digits"),addressLine1:r().trim().min(5,"Address Line 1 is required").max(100,"Maximum 100 characters allowed"),addressLine2:r().trim().max(100,"Maximum 100 characters allowed").optional().or(A("")),city:r().trim().min(1,"City is required").max(50,"Maximum 50 characters allowed"),state:r().trim().min(1,"State is required").max(50,"Maximum 50 characters allowed"),country:r().trim().min(1,"Country is required").max(56,"Maximum 56 characters allowed"),phoneNumber:r().trim().max(13,"Maximum 13 characters including +91").regex(/^(?:\+91)?[6-9]\d{9}$/,"Enter valid +91 number"),email:r().trim().email("Enter a valid email"),isDefault:v().default(!1),addressName:r().trim().min(3,"Address name must be at least 3 characters").max(50,"Address name must be at most 50 characters")}),$=()=>{const l=w(),{addressId:t}=L(),{mutate:b,isLoading:g}=k(),{mutate:h,isLoading:p}=q(),o=!!(t&&t!=="new"),{data:n,isLoading:N}=I(t,{enabled:o}),{register:a,handleSubmit:f,reset:x,formState:{errors:s}}=C({resolver:E(D),defaultValues:{firstName:"",lastName:"",pinCode:"",addressLine1:"",addressLine2:"",city:"",state:"Kerala",country:"India",phoneNumber:"+91",email:"",isDefault:!1,type:"Home",addressName:""}});S.useEffect(()=>{n?.data?.address&&x(n.data.address)},[n,x]);const j=i=>{o?(console.log("id",t),h({addressId:t,data:i},{onSuccess:()=>{m.success("Address updated successfully!"),l("/account/addresses")},onError:c=>{m.error(c.response?.data?.message||"Failed to update address")}})):b(i,{onSuccess:()=>{m.success("Address added successfully!"),l("/account/addresses")},onError:c=>{m.error(c.response?.data?.message||"Failed to add address")}})},u=g||p||t&&N;return e.jsxs("div",{className:"max-w-3xl",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("button",{onClick:()=>l(-1),className:"text-gray-500 hover:text-black",children:e.jsx(P,{})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:t?"Edit Address":"Add New Address"})]}),e.jsxs("form",{onSubmit:f(j),className:"bg-white p-6 md:p-8 rounded-lg shadow-sm border border-gray-200 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Enter Shipping Address"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsx(d,{id:"firstName",label:"First Name*",...a("firstName"),error:s.firstName?.message}),e.jsx(d,{label:"Last Name*",id:"lastName",...a("lastName"),error:s.lastName?.message})]}),e.jsx("div",{className:"mb-4",children:e.jsx(d,{label:"Pin Code*",id:"pinCode",...a("pinCode"),error:s.pinCode?.message})}),e.jsx("div",{className:"mb-4",children:e.jsx(d,{label:"Address Line 1*",id:"addressLine1",...a("addressLine1"),error:s.addressLine1?.message})}),e.jsx("div",{className:"mb-4",children:e.jsx(d,{label:"Address Line 2",id:"addressLine2",...a("addressLine2"),error:s.addressLine2?.message})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"state",className:"mb-1 text-sm font-medium text-gray-700",children:"State*"}),e.jsx("select",{id:"state",...a("state"),className:"border border-gray-300 p-3 rounded-md text-sm",children:F.map(i=>e.jsx("option",{value:i,children:i},i))}),s.state&&e.jsx("span",{className:"text-red-600 text-xs mt-1",children:s.state.message})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"city",className:"mb-1 text-sm font-medium text-gray-700",children:"City*"}),e.jsx("input",{id:"city",className:"border border-gray-300 p-3 rounded-md text-sm",...a("city"),placeholder:"City"}),s.city&&e.jsx("span",{className:"text-red-600 text-xs mt-1",children:s.city.message})]})]}),e.jsx("div",{className:"mb-4",children:e.jsx(d,{label:"Country",id:"country",...a("country"),error:s.country?.message,disabled:!0,className:"bg-gray-100"})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Enter Contact Info"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(d,{label:"Phone Number*",id:"phoneNumber",...a("phoneNumber"),error:s.phoneNumber?.message}),e.jsx(d,{label:"Email",id:"email",...a("email"),error:s.email?.message})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer mt-4",children:[e.jsx("input",{type:"checkbox",...a("isDefault"),className:"form-checkbox text-black rounded focus:ring-black"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Set as default"})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-6 items-end",children:[e.jsxs("div",{className:"grow",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address Name"}),e.jsx("input",{type:"text",id:"addressName",...a("addressName"),className:"border border-gray-300 p-3 rounded-md text-sm w-full",placeholder:"Enter address name"}),s.addressName&&e.jsx("span",{className:"text-red-600 text-xs mt-1",children:s.addressName.message})]}),e.jsx("button",{type:"submit",disabled:u,className:"w-full md:w-auto bg-black text-white px-8 py-3 rounded-lg font-semibold hover:bg-gray-800 transition disabled:opacity-50 min-w-[200px]",children:u?e.jsx(M,{className:"w-5 h-5 animate-spin mx-auto"}):"Save Address"})]})]})]})};export{$ as default};
