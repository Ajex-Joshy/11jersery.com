import{q as p,j as e,a1 as f,W as y,am as j,N as g,L as N,t as w,O as v,g as P}from"./index-BqlAPq8n.js";import{e as S}from"./orderHooks-wyYWAIe_.js";import{I as D}from"./Buttons-C5k6lvPB.js";import{A as C}from"./arrow-right-DArSHYqP.js";const O=({status:s})=>{const a={Pending:"bg-yellow-50 text-yellow-700 border-yellow-200",Processing:"bg-blue-50 text-blue-700 border-blue-200",Shipped:"bg-purple-50 text-purple-700 border-purple-200",Delivered:"bg-green-50 text-green-700 border-green-200",Cancelled:"bg-red-50 text-red-700 border-red-200",Returned:"bg-gray-50 text-gray-700 border-gray-200"};return e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold border ${a[s]||a.Pending}`,children:s})},k=({order:s})=>{console.log("order",s);const a=v(),o=s.items.slice(0,3),n=s.items.length-3;return s.items.length===0?e.jsx("div",{children:"No Orders Found"}):e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow mb-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center border-b border-gray-100 pb-4 mb-4 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gray-100 rounded-md",children:e.jsx(g,{size:20,className:"text-gray-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Order ID"}),e.jsx("p",{className:"font-mono font-bold text-gray-900",children:s.orderId||s._id.slice(-6).toUpperCase()})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right hidden md:block",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Placed On"}),e.jsx("p",{className:"font-medium text-gray-900",children:new Date(s.createdAt).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})})]}),e.jsx(O,{status:s.orderStatus})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-6 items-start md:items-center",children:[e.jsxs("div",{className:"flex -space-x-3 overflow-hidden py-2",children:[o.map(l=>e.jsx("img",{src:l.imageUrl,alt:l.title,className:"inline-block h-16 w-16 rounded-full ring-2 ring-white object-cover bg-gray-100",onError:i=>i.target.src="/placeholder.jpg"},l._id)),n>0&&e.jsxs("div",{className:"h-16 w-16 rounded-full ring-2 ring-white bg-gray-100 flex items-center justify-center text-xs font-medium text-gray-600",children:["+",n]})]}),console.log(s),e.jsxs("div",{className:"grow",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:s?.items.length===1?s.items[0]?.title:`${s?.items[0].title} + ${s?.items?.length-1} others`}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Total Amount:"," ",e.jsx("span",{className:"text-black font-bold",children:P(s?.price?.total)})]})]}),e.jsxs("div",{className:"flex gap-3 w-full md:w-auto mt-2 md:mt-0",children:[s.orderStatus==="Delivered"&&e.jsx(D,{order:s,variant:"icon",className:"border border-gray-300 p-2 rounded-md"}),e.jsxs("button",{onClick:()=>a(`/account/orders/${s._id}`),className:"grow md:grow-0 bg-white border border-gray-300 text-gray-700 px-4 py-2 rounded-md text-sm font-semibold hover:bg-gray-50 transition flex items-center justify-center gap-2",children:["View Details ",e.jsx(C,{size:16})]})]})]})]})},E=()=>{const[s,a]=p(),o=t=>{a(r=>(t==="All"?r.delete("status"):r.set("status",t),r.set("page","1"),r))},n=t=>{t.preventDefault();const r=t.target.search.value;a(c=>(r?c.set("search",r):c.delete("search"),c))},l=t=>{a(r=>(r.set("page",t),r))},{data:i,isLoading:x,isError:h,error:u}=S(s),d=i?.data?.orders||[],m=i?.data?.metadata,b=s.get("status")||"All";return x?e.jsx(f,{text:"Loading your orders..."}):h?e.jsx(y,{error:u}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Orders"}),e.jsxs("form",{onSubmit:n,className:"relative w-full md:w-72",children:[e.jsx(j,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{name:"search",defaultValue:s.get("search"),placeholder:"Search Order ID or Product...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-black focus:border-transparent outline-none"})]})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 no-scrollbar",children:["All","Pending","Processing","Shipped","Delivered","Cancelled"].map(t=>e.jsx("button",{onClick:()=>o(t),className:`
                    px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors
                    ${b===t?"bg-black text-white":"bg-white text-gray-600 border border-gray-200 hover:bg-gray-50"}
                `,children:t},t))}),d.length===0?e.jsxs("div",{className:"text-center py-16 bg-gray-50 rounded-lg border border-dashed border-gray-300",children:[e.jsx(g,{className:"mx-auto h-12 w-12 text-gray-300 mb-3"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"No orders found"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"We couldn't find any orders matching your criteria."}),e.jsx(N,{to:"/",className:"text-blue-600 font-semibold hover:underline",children:"Start Shopping"})]}):e.jsxs("div",{children:[console.log(d),d.map(t=>e.jsx(k,{order:t},t._id))]}),m?.pagination?.totalPages>1&&e.jsx("div",{className:"flex justify-center pt-4",children:e.jsx(w,{pagination:m.pagination,onPageChange:l})})]})};export{E as default};
