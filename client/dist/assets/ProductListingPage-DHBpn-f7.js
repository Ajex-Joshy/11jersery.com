import{c as z,j as e,P as s,T,q,o as F,L as M,p as R,t as O}from"./index-B5Zfx6Dp.js";import{a as L}from"./productHooks-Blzsizb3.js";import{P as A}from"./ProductCard-CgDUgT63.js";import{H}from"./house-RsTxX3en.js";import"./star-CBlQbPWA.js";const $=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],_=z("sliders-horizontal",$),b=({metadata:r,activeFilters:a,onFilterChange:c,onPriceChange:t,onClearFilters:m})=>{const o=r?.filters||{},h=Object.values(a).some(d=>d);return e.jsxs("aside",{className:"w-full lg:w-64 xl:w-72",children:[e.jsxs("div",{className:"flex justify-between items-center pb-4 border-b border-gray-200 mb-4",children:[e.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(_,{size:18})," Filters"]}),h&&e.jsx("button",{onClick:m,className:"text-xs font-medium text-blue-600 hover:underline",children:"Clear All"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(y,{categories:o.availableClubs||[],activeCategory:a.category,onCategoryChange:d=>c("category",d)}),e.jsx(j,{sizes:o.availableSizes||[],activeSize:a.size,onSizeChange:d=>c("size",d)}),e.jsx(f,{range:o.priceRange,activePrice:a.price,onPriceChange:t}),e.jsx("button",{onClick:()=>t(a.price),className:"w-full bg-black text-white py-2.5 rounded-lg font-semibold hover:bg-gray-800 transition",children:"Apply Filter"})]})]})},y=({categories:r,activeCategory:a,onCategoryChange:c})=>e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Categories"}),e.jsx("ul",{className:"space-y-1.5 max-h-60 overflow-y-auto",children:r.map(t=>e.jsx("li",{children:e.jsxs("button",{onClick:()=>c(t.slug),className:`flex justify-between items-center w-full text-left text-sm ${a===t.slug?"font-bold text-black":"text-gray-600 hover:text-black"}`,children:[e.jsx("span",{children:t.name}),e.jsx("span",{className:"text-xs text-gray-400",children:t.count})]})},t.slug))})]}),j=({sizes:r,activeSize:a,onSizeChange:c})=>e.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Size"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:r.map(t=>e.jsx("button",{onClick:()=>c(t),className:`
            border text-center text-sm font-medium py-2 rounded-md transition
            ${a===t?"bg-black text-white border-black":"bg-white border-gray-300 hover:border-black"}
          `,children:t},t))})]}),f=({range:r,activePrice:a,onPriceChange:c})=>{const t=o=>c({...a,min:o.target.value}),m=o=>c({...a,max:o.target.value});return e.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Price"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",placeholder:`₹${r?.starts||0}`,value:a.min||"",onChange:t,className:"w-full border border-gray-300 rounded-md p-2 text-sm text-center"}),e.jsx("span",{className:"text-gray-400",children:"-"}),e.jsx("input",{type:"number",placeholder:`₹${r?.ends||5e3}`,value:a.max||"",onChange:m,className:"w-full border border-gray-300 rounded-md p-2 text-sm text-center"})]})]})};b.propTypes={metadata:s.object,activeFilters:s.object,onFilterChange:s.func,onPriceChange:s.func,onClearFilters:s.func};y.propTypes={categories:s.arrayOf(s.shape({slug:s.string.isRequired,name:s.string.isRequired,count:s.number.isRequired})),activeCategory:s.string,onCategoryChange:s.func};j.propTypes={sizes:s.arrayOf(s.string),activeSize:s.string,onSizeChange:s.func};f.propTypes={range:s.shape({starts:s.number,ends:s.number}),activePrice:s.shape({min:s.oneOfType([s.number,s.string]),max:s.oneOfType([s.number,s.string])}),onPriceChange:s.func};const N=({products:r})=>!r||r.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500",children:[e.jsx(T,{size:40,className:"mb-4"}),e.jsx("h3",{className:"text-xl font-semibold",children:"No Products Found"}),e.jsx("p",{className:"text-sm",children:"Try adjusting your filters or search term."})]}):e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 md:gap-6",children:r.map(a=>e.jsx(A,{product:a},a._id))});N.propTypes={products:s.arrayOf(s.shape({_id:s.string.isRequired}).isRequired).isRequired};const E=()=>e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 md:gap-6 animate-pulse",children:[...Array(9)].map((r,a)=>e.jsxs("div",{className:"rounded-xl shadow-sm border border-gray-100 bg-white",children:[e.jsx("div",{className:"aspect-square bg-gray-200 rounded-t-xl"}),e.jsxs("div",{className:"p-4 space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]},a))}),V=()=>{const[r,a]=q(),{slug:c}=F();c&&!r.has("category")&&r.set("category",c);const{data:t,isLoading:m,isError:o,error:h}=L(r),d=t?.data?.metadata,u=t?.data?.data,C=u?.products||[],g=d?.pagination,p={category:r.get("category")||"",size:r.get("size")||"",price:{min:r.get("minPrice")||"",max:r.get("maxPrice")||""}},v=(n,l)=>{const i=p[n]===l?"":l;a(x=>(i?x.set(n,i):x.delete(n),x.set("page","1"),x),{replace:!0})},P=({min:n,max:l})=>{a(i=>(n?i.set("minPrice",n):i.delete("minPrice"),l?i.set("maxPrice",l):i.delete("maxPrice"),i.set("page","1"),i),{replace:!0})},w=n=>{const l=n.target.value;a(i=>(i.set("sortBy",l.split("-")[0]),i.set("sortOrder",l.split("-")[1]),i.set("page","1"),i),{replace:!0})},k=n=>{a(l=>(l.set("page",n.toString()),l),{replace:!0})},S=()=>{a(n=>{const l=new URLSearchParams;return n.has("search")&&l.set("search",n.get("search")),l},{replace:!0})};return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("nav",{className:"mb-4 text-sm flex items-center gap-2 text-gray-500",children:[e.jsx(M,{to:"/",className:"hover:text-gray-900",children:e.jsx(H,{size:14})}),e.jsx(R,{size:14}),e.jsx("span",{className:"font-medium text-gray-700",children:u?.categoryTitle||"Products"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8 md:gap-12",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx(b,{metadata:d,activeFilters:p,onFilterChange:v,onPriceChange:P,onClearFilters:S})}),e.jsxs("main",{className:"lg:col-span-3",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center pb-4 border-b border-gray-200 mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2 md:mb-0",children:u?.categoryTitle||"Products"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsxs("span",{className:"text-gray-600",children:["Showing ",g?.totalProducts||0," products"]}),e.jsx("span",{className:"text-gray-300",children:"|"}),e.jsx("label",{htmlFor:"sort",className:"text-gray-600",children:"Sort by:"}),e.jsx("select",{id:"sort",value:`${r.get("sortBy")||"createdAt"}-${r.get("sortOrder")||"desc"}`,onChange:w,className:"border border-gray-300 rounded-md py-1.5 px-2 text-sm font-medium focus:outline-none focus:ring-1 focus:ring-black",children:d?.sorting?.availableSorts.map(n=>e.jsx("option",{value:n.key,children:n.label},n.key))})]})]}),m?e.jsx(E,{}):o?e.jsxs("div",{className:"text-center text-red-500",children:["Error: ",h.message]}):e.jsx(N,{products:C}),e.jsx("div",{className:"mt-12",children:g&&g.totalPages>1&&e.jsx(O,{pagination:g,onPageChange:k})})]})]})]})};export{V as default};
