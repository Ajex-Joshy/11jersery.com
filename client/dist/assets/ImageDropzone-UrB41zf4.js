import{aa as D,aO as h,ah as d,ac as b,aP as i,ab as T,ad as O,aQ as x,aR as j,ai as S,aS as o,r,j as s,X as U,P as u}from"./index-B5Zfx6Dp.js";import{u as L,C as M,I as _}from"./ImageCropperModal-CFWM9OCQ.js";const k=D({title:T().trim().min(3,"Category name must be 3-100 characters").max(30,"Category name must be 3-30 characters"),offerEnabled:d().default(!1),discountType:h([b(["flat","percent"]),S(""),x(),j()]).transform(e=>e===""?void 0:e),discountAmount:i().min(0).optional(),minPurchaseAmount:i().min(0).optional(),discountPercentage:i().min(0).max(100).optional(),maxRedeemable:i().min(0).optional(),isListed:b(["true","false"]).transform(e=>e==="true").default("true"),inHome:d().default(!1),inCollections:d().default(!1),image:h([O(File),x(),j()]).refine(e=>!e||e.size<=5e6,"Image must be 5MB or less").refine(e=>!e||["image/jpeg","image/png","image/webp"].includes(e.type),"Only .jpg, .png, and .webp formats are supported")}).superRefine((e,n)=>{if(!e.offerEnabled){e.discountType=void 0,e.discountAmount=0,e.minPurchaseAmount=0,e.discountPercentage=0,e.maxRedeemable=0;return}if(!e.discountType){n.addIssue({code:o.custom,path:["discountType"],message:"Please select a discount type when offer is enabled"});return}e.discountType==="flat"&&(!e.discountAmount&&e.discountAmount!==0&&n.addIssue({code:o.custom,path:["discountAmount"],message:"Discount amount is required for flat discount"}),!e.minPurchaseAmount&&e.minPurchaseAmount!==0&&n.addIssue({code:o.custom,path:["minPurchaseAmount"],message:"Minimum purchase amount is required for flat discount"}),e.discountAmount>0&&e.minPurchaseAmount>0&&e.discountAmount>e.minPurchaseAmount&&n.addIssue({code:o.custom,path:["discountAmount"],message:"Discount cannot be more than minimum purchase amount"})),e.discountType==="percent"&&(!e.discountPercentage&&e.discountPercentage!==0&&n.addIssue({code:o.custom,path:["discountPercentage"],message:"Discount percentage is required for percent discount"}),!e.maxRedeemable&&e.maxRedeemable!==0&&n.addIssue({code:o.custom,path:["maxRedeemable"],message:"Max redeemable amount is required for percent discount"}))}),q=({onChange:e,value:n,aspect:y=16/9,initialImageUrl:c})=>{const[P,p]=r.useState(null),[w,m]=r.useState(!1),[f,a]=r.useState(null);r.useEffect(()=>{if(n instanceof File){const t=URL.createObjectURL(n);return a(t),()=>URL.revokeObjectURL(t)}else a(c&&!n?c:null)},[n,c]);const A=r.useCallback(t=>{const g=t[0];if(g){const l=new FileReader;l.onloadend=()=>{p(l.result),m(!0)},l.readAsDataURL(g)}},[]),{getRootProps:R,getInputProps:C,isDragActive:I}=L({onDrop:A,accept:{"image/jpeg":[],"image/png":[],"image/webp":[]},multiple:!1}),v=t=>{e(t),m(!1),p(null)},N=t=>{t.stopPropagation(),e(null),a(null)};return f?s.jsxs("div",{className:"relative w-full h-64 rounded-lg overflow-hidden",children:[s.jsx("img",{src:f,alt:"Category preview",className:"w-full h-full object-cover"}),s.jsx("button",{type:"button",onClick:N,className:"absolute top-2 right-2 bg-red-600 text-white rounded-full p-1.5 shadow-md hover:bg-red-700 transition",children:s.jsx(U,{className:"w-5 h-5"})})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{...R(),className:`w-full h-64 border-2 border-dashed rounded-lg flex flex-col items-center justify-center text-center cursor-pointer transition ${I?"border-green-500 bg-green-50":"border-gray-300 hover:border-gray-400"}`,children:[s.jsx("input",{...C()}),s.jsx("div",{className:"p-4 rounded-full bg-gray-100 mb-4",children:s.jsx(M,{className:"w-10 h-10 text-gray-500"})}),s.jsx("p",{className:"font-semibold text-gray-700",children:"Drag and drop image here"}),s.jsx("p",{className:"text-sm text-gray-500",children:"or click to add image"}),s.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"(Supports .png, .jpg, .webp up to 5MB)"})]}),w&&s.jsx(_,{imageSrc:P,onClose:()=>m(!1),onCropComplete:v,aspect:y})]})};q.propTypes={onChange:u.func.isRequired,value:u.instanceOf(File),aspect:u.number,initialImageUrl:u.string};export{q as I,k as c};
