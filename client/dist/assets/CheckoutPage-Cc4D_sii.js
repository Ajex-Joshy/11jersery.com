import{O as x,j as e,l as g,h as u,Y as b,P as o,r as n,d as j,L as f,p as y,z as N}from"./index-199rnzlN.js";import{u as m}from"./addressHooks-CexdfvMn.js";import{P as v}from"./pencil-BXnamTYl.js";import{C as k}from"./CartProductList-DbWQUFEH.js";import{O as w}from"./OrderSummary-GxOrDlBV.js";import{S as C}from"./shield-check-Z23C9VkS.js";import{L as P}from"./lock-DdLkE2Uh.js";import"./minus-DJJ-ltXZ.js";import"./arrow-right-BrA6Hsf4.js";const p=({selectedId:r,onSelect:a})=>{const t=x(),{data:i,isLoading:c}=m(),l=i?.data||[];return c?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(g,{className:"animate-spin text-gray-400"})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-end mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Shipping Address"}),e.jsxs("button",{onClick:()=>t("/account/addresses/new"),className:"text-sm font-medium text-blue-600 hover:text-blue-800 flex items-center gap-1",children:[e.jsx(u,{size:16})," Add New"]})]}),l.length===0?e.jsxs("div",{className:"p-6 border-2 border-dashed border-gray-300 rounded-xl text-center text-gray-500",children:[e.jsx(b,{className:"mx-auto mb-2 opacity-50",size:32}),e.jsx("p",{children:"No addresses found."}),e.jsx("button",{onClick:()=>t("/account/addresses/new"),className:"mt-3 text-black font-semibold underline hover:text-gray-700",children:"Add a shipping address"})]}):e.jsx("div",{className:"grid grid-cols-1 gap-4",children:l?.data?.map(s=>{const d=r===s._id;return e.jsxs("div",{onClick:()=>a(s._id),className:`
                  relative p-5 rounded-xl border-2 cursor-pointer transition-all duration-200
                  ${d?"border-black bg-gray-50 ring-1 ring-black":"border-gray-200 hover:border-gray-300 bg-white"}
                `,children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:`font-bold ${d?"text-black":"text-gray-700"}`,children:s.type}),s.isDefault&&e.jsx("span",{className:"bg-gray-200 text-gray-600 text-[10px] px-2 py-0.5 rounded-full font-bold uppercase",children:"Default"})]}),e.jsx("button",{onClick:h=>{h.stopPropagation(),t(`/account/addresses/edit/${s._id}`)},className:"absolute top-3 right-3 text-gray-500 hover:text-black",children:e.jsx(v,{size:18})})]}),e.jsxs("div",{className:`text-sm leading-relaxed ${d?"text-gray-800":"text-gray-500"}`,children:[e.jsxs("p",{className:"font-medium mb-1",children:[s.firstName," ",s.lastName]}),e.jsx("p",{children:s.addressLine1}),s.addressLine2&&e.jsx("p",{children:s.addressLine2}),e.jsxs("p",{children:[s.city,", ",s.state," - ",s.pinCode]}),e.jsx("p",{className:"mt-2 font-medium",children:s.phone})]})]},s._id)})})]})};p.propTypes={selectedId:o.string,onSelect:o.func};const D=()=>{const r=x(),{data:a}=m(),[t,i]=n.useState(null);n.useEffect(()=>{if(a?.data?.data&&!t){const s=a.data.data.find(d=>d.isDefault);s?i(s._id):a.data.length>0&&i(a.data[0]._id)}},[a,t]);const c=()=>{if(!t){N.error("Please select a shipping address");return}r("/payment",{state:{selectedAddressId:t}})},{data:l}=j();return n.useEffect(()=>{(l?.data?.items||[]).length===0&&r("/cart")},[l,r]),e.jsx("div",{className:"bg-gray-50 min-h-screen pb-20",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("nav",{className:"mb-8 text-sm flex items-center gap-2 text-gray-500",children:[e.jsx(f,{to:"/cart",className:"hover:text-black transition",children:"Cart"}),e.jsx(y,{size:14}),e.jsx("span",{className:"font-medium text-black",children:"Checkout"})]}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Checkout"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[e.jsx("div",{className:"lg:col-span-7 space-y-8",children:e.jsx("section",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:e.jsx(p,{selectedId:t,onSelect:i})})}),e.jsx("div",{className:"lg:col-span-5",children:e.jsxs("div",{className:"sticky top-24 space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 max-h-[400px] overflow-y-auto custom-scrollbar",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4 flex items-center justify-between",children:"Order Items"}),e.jsx(k,{})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[e.jsx(w,{isCheckoutPage:!0}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs text-gray-500 mt-4 mb-6 bg-gray-50 py-2 rounded-lg",children:[e.jsx(C,{size:14,className:"text-green-600"}),e.jsx("span",{children:"Secure SSL Encryption"})]}),e.jsx("button",{onClick:c,className:"w-full bg-black text-white py-4 rounded-xl font-bold text-lg hover:bg-gray-800 transition shadow-lg disabled:opacity-70 flex items-center justify-center gap-2",children:e.jsxs(e.Fragment,{children:["Go to payment ",e.jsx(P,{size:18})]})}),e.jsx("p",{className:"text-center text-xs text-gray-400 mt-4",children:"By placing this order, you agree to our Terms of Service."})]})]})})]})]})})};export{D as default};
