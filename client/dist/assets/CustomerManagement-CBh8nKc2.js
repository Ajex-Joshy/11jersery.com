import{c as Ze,r as o,au as Je,a as se,u as Ce,i as et,k as tt,av as rt,j as c,P,aw as at,ax as nt,C as it}from"./index-BqlAPq8n.js";import{S as st,A as ot}from"./UiElements-C7xsmFxV.js";import{A as lt}from"./arrow-up-right-DYY3yn4U.js";import{a1 as ct,a2 as Y,P as Q,E as ee,w as oe,a3 as Te,r as le,F as Ee,a4 as ut,J as Ae,H as k,L as Le,Q as dt,a5 as pt,a6 as mt,c as ce,s as ke,a as Ie,b as Ne,d as ft,j as vt,i as ht,h as pe,D as yt,u as De,R as gt,S as bt,k as xt,l as Pt,G as Ot,n as Re,q as jt,v as St,o as wt,t as Ct,x as Tt,y as Et,Z as At,z as Lt,A as kt,B as _e,C as me,I as fe,M as It,N as Nt,O as Dt,T as Rt,V as _t,W as $t,X as Bt,$ as Wt,Y as Mt,_ as qt,a0 as Kt}from"./CartesianChart-DnTwVgXE.js";import"./pen-CWN40j_W.js";const Ft=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],Ut=Ze("arrow-down-right",Ft),$e=Math.cos,G=Math.sin,A=Math.sqrt,X=Math.PI,Z=2*X,ue={draw(e,r){const t=A(r/X);e.moveTo(t,0),e.arc(0,0,t,0,Z)}},Vt={draw(e,r){const t=A(r/5)/2;e.moveTo(-3*t,-t),e.lineTo(-t,-t),e.lineTo(-t,-3*t),e.lineTo(t,-3*t),e.lineTo(t,-t),e.lineTo(3*t,-t),e.lineTo(3*t,t),e.lineTo(t,t),e.lineTo(t,3*t),e.lineTo(-t,3*t),e.lineTo(-t,t),e.lineTo(-3*t,t),e.closePath()}},Be=A(1/3),Yt=Be*2,Qt={draw(e,r){const t=A(r/Yt),a=t*Be;e.moveTo(0,-t),e.lineTo(a,0),e.lineTo(0,t),e.lineTo(-a,0),e.closePath()}},Gt={draw(e,r){const t=A(r),a=-t/2;e.rect(a,a,t,t)}},Xt=.8908130915292852,We=G(X/10)/G(7*X/10),Ht=G(Z/10)*We,zt=-$e(Z/10)*We,Zt={draw(e,r){const t=A(r*Xt),a=Ht*t,n=zt*t;e.moveTo(0,-t),e.lineTo(a,n);for(let i=1;i<5;++i){const s=Z*i/5,l=$e(s),u=G(s);e.lineTo(u*t,-l*t),e.lineTo(l*a-u*n,u*a+l*n)}e.closePath()}},te=A(3),Jt={draw(e,r){const t=-A(r/(te*3));e.moveTo(0,t*2),e.lineTo(-te*t,-t),e.lineTo(te*t,-t),e.closePath()}},w=-.5,C=A(3)/2,ne=1/A(12),er=(ne/2+1)*3,tr={draw(e,r){const t=A(r/er),a=t/2,n=t*ne,i=a,s=t*ne+t,l=-i,u=s;e.moveTo(a,n),e.lineTo(i,s),e.lineTo(l,u),e.lineTo(w*a-C*n,C*a+w*n),e.lineTo(w*i-C*s,C*i+w*s),e.lineTo(w*l-C*u,C*l+w*u),e.lineTo(w*a+C*n,w*n-C*a),e.lineTo(w*i+C*s,w*s-C*i),e.lineTo(w*l+C*u,w*u-C*l),e.closePath()}};function rr(e,r){let t=null,a=ct(n);e=typeof e=="function"?e:Y(e||ue),r=typeof r=="function"?r:Y(r===void 0?64:+r);function n(){let i;if(t||(t=i=a()),e.apply(this,arguments).draw(t,+r.apply(this,arguments)),i)return t=null,i+""||null}return n.type=function(i){return arguments.length?(e=typeof i=="function"?i:Y(i),n):e},n.size=function(i){return arguments.length?(r=typeof i=="function"?i:Y(+i),n):r},n.context=function(i){return arguments.length?(t=i??null,n):t},n}var ar=["type","size","sizeType"];function ie(){return ie=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)({}).hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},ie.apply(null,arguments)}function ve(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,a)}return t}function he(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?ve(Object(t),!0).forEach(function(a){nr(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ve(Object(t)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}function nr(e,r,t){return(r=ir(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function ir(e){var r=sr(e,"string");return typeof r=="symbol"?r:r+""}function sr(e,r){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var a=t.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function or(e,r){if(e==null)return{};var t,a,n=lr(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],r.indexOf(t)===-1&&{}.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}function lr(e,r){if(e==null)return{};var t={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;t[a]=e[a]}return t}var Me={symbolCircle:ue,symbolCross:Vt,symbolDiamond:Qt,symbolSquare:Gt,symbolStar:Zt,symbolTriangle:Jt,symbolWye:tr},cr=Math.PI/180,ur=e=>{var r="symbol".concat(Te(e));return Me[r]||ue},dr=(e,r,t)=>{if(r==="area")return e;switch(t){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*cr;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.tan(a)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},pr=(e,r)=>{Me["symbol".concat(Te(e))]=r},qe=e=>{var{type:r="circle",size:t=64,sizeType:a="area"}=e,n=or(e,ar),i=he(he({},n),{},{type:r,size:t,sizeType:a}),s="circle";typeof r=="string"&&(s=r);var l=()=>{var f=ur(s),v=rr().type(f).size(dr(t,a,s)),y=v();if(y!==null)return y},{className:u,cx:p,cy:h}=i,m=Q(i);return ee(p)&&ee(h)&&ee(t)?o.createElement("path",ie({},m,{className:oe("recharts-symbols",u),transform:"translate(".concat(p,", ").concat(h,")"),d:l()})):null};qe.registerSymbol=pr;var re={},ye;function mr(){return ye||(ye=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function r(t){if(typeof t!="object"||t==null)return!1;if(Object.getPrototypeOf(t)===null)return!0;if(Object.prototype.toString.call(t)!=="[object Object]"){const n=t[Symbol.toStringTag];return n==null||!Object.getOwnPropertyDescriptor(t,Symbol.toStringTag)?.writable?!1:t.toString()===`[object ${n}]`}let a=t;for(;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(t)===a}e.isPlainObject=r})(re)),re}var ae,ge;function fr(){return ge||(ge=1,ae=mr().isPlainObject),ae}var vr=fr();const hr=Je(vr);function be(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,a)}return t}function xe(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?be(Object(t),!0).forEach(function(a){yr(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):be(Object(t)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}function yr(e,r,t){return(r=gr(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function gr(e){var r=br(e,"string");return typeof r=="symbol"?r:r+""}function br(e,r){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var a=t.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function H(){return H=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)({}).hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},H.apply(null,arguments)}var Pe=(e,r,t,a,n)=>{var i=t-a,s;return s="M ".concat(e,",").concat(r),s+="L ".concat(e+t,",").concat(r),s+="L ".concat(e+t-i/2,",").concat(r+n),s+="L ".concat(e+t-i/2-a,",").concat(r+n),s+="L ".concat(e,",").concat(r," Z"),s},xr={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Pr=e=>{var r=le(e,xr),{x:t,y:a,upperWidth:n,lowerWidth:i,height:s,className:l}=r,{animationEasing:u,animationDuration:p,animationBegin:h,isUpdateAnimationActive:m}=r,f=o.useRef(null),[v,y]=o.useState(-1),g=o.useRef(n),j=o.useRef(i),O=o.useRef(s),S=o.useRef(t),b=o.useRef(a),I=Ee(e,"trapezoid-");if(o.useEffect(()=>{if(f.current&&f.current.getTotalLength)try{var E=f.current.getTotalLength();E&&y(E)}catch{}},[]),t!==+t||a!==+a||n!==+n||i!==+i||s!==+s||n===0&&i===0||s===0)return null;var N=oe("recharts-trapezoid",l);if(!m)return o.createElement("g",null,o.createElement("path",H({},Q(r),{className:N,d:Pe(t,a,n,i,s)})));var D=g.current,R=j.current,d=O.current,$=S.current,T=b.current,J="0px ".concat(v===-1?1:v,"px"),B="".concat(v,"px 0px"),_=ut(["strokeDasharray"],p,u);return o.createElement(Ae,{animationId:I,key:I,canBegin:v>0,duration:p,easing:u,isActive:m,begin:h},E=>{var W=k(D,n,E),M=k(R,i,E),x=k(d,s,E),U=k($,t,E),q=k(T,a,E);f.current&&(g.current=W,j.current=M,O.current=x,S.current=U,b.current=q);var V=E>0?{transition:_,strokeDasharray:B}:{strokeDasharray:J};return o.createElement("path",H({},Q(r),{className:N,d:Pe(U,q,W,M,x),ref:f,style:xe(xe({},V),r.style)}))})},Or=["option","shapeType","propTransformer","activeClassName","isActive"];function jr(e,r){if(e==null)return{};var t,a,n=Sr(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],r.indexOf(t)===-1&&{}.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}function Sr(e,r){if(e==null)return{};var t={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;t[a]=e[a]}return t}function Oe(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,a)}return t}function z(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Oe(Object(t),!0).forEach(function(a){wr(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Oe(Object(t)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}function wr(e,r,t){return(r=Cr(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Cr(e){var r=Tr(e,"string");return typeof r=="symbol"?r:r+""}function Tr(e,r){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var a=t.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function Er(e,r){return z(z({},r),e)}function Ar(e,r){return e==="symbols"}function je(e){var{shapeType:r,elementProps:t}=e;switch(r){case"rectangle":return o.createElement(mt,t);case"trapezoid":return o.createElement(Pr,t);case"sector":return o.createElement(pt,t);case"symbols":if(Ar(r))return o.createElement(qe,t);break;case"curve":return o.createElement(dt,t);default:return null}}function Lr(e){return o.isValidElement(e)?e.props:e}function kr(e){var{option:r,shapeType:t,propTransformer:a=Er,activeClassName:n="recharts-active-shape",isActive:i}=e,s=jr(e,Or),l;if(o.isValidElement(r))l=o.cloneElement(r,z(z({},s),Lr(r)));else if(typeof r=="function")l=r(s);else if(hr(r)&&typeof r!="boolean"){var u=a(r,s);l=o.createElement(je,{shapeType:t,elementProps:u})}else{var p=s;l=o.createElement(je,{shapeType:t,elementProps:p})}return i?o.createElement(Le,{className:n},l):l}var Ir=["children"];function Nr(e,r){if(e==null)return{};var t,a,n=Dr(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],r.indexOf(t)===-1&&{}.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}function Dr(e,r){if(e==null)return{};var t={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;t[a]=e[a]}return t}var Rr={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},_r=o.createContext(Rr);function $r(e){var{children:r}=e,t=Nr(e,Ir);return o.createElement(_r.Provider,{value:t},r)}var Ke=(e,r,t,a)=>Ie(e,"xAxis",r,a),Fe=(e,r,t,a)=>Ne(e,"xAxis",r,a),Ue=(e,r,t,a)=>Ie(e,"yAxis",t,a),Ve=(e,r,t,a)=>Ne(e,"yAxis",t,a),Br=ce([ke,Ke,Ue,Fe,Ve],(e,r,t,a,n)=>ht(e,"xAxis")?pe(r,a,!1):pe(t,n,!1)),Wr=(e,r,t,a,n)=>n;function Mr(e){return e.type==="line"}var qr=ce([vt,Wr],(e,r)=>e.filter(Mr).find(t=>t.id===r)),Kr=ce([ke,Ke,Ue,Fe,Ve,qr,Br,ft],(e,r,t,a,n,i,s,l)=>{var{chartData:u,dataStartIndex:p,dataEndIndex:h}=l;if(!(i==null||r==null||t==null||a==null||n==null||a.length===0||n.length===0||s==null)){var{dataKey:m,data:f}=i,v;if(f!=null&&f.length>0?v=f:v=u?.slice(p,h+1),v!=null)return la({layout:e,xAxis:r,yAxis:t,xAxisTicks:a,yAxisTicks:n,dataKey:m,bandSize:s,displayedData:v})}}),Fr=["id"],Ur=["type","layout","connectNulls","needClip","shape"],Vr=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function F(){return F=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)({}).hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},F.apply(null,arguments)}function Se(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,a)}return t}function L(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Se(Object(t),!0).forEach(function(a){Yr(e,a,t[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Se(Object(t)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))})}return e}function Yr(e,r,t){return(r=Qr(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Qr(e){var r=Gr(e,"string");return typeof r=="symbol"?r:r+""}function Gr(e,r){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var a=t.call(e,r);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(e)}function de(e,r){if(e==null)return{};var t,a,n=Xr(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],r.indexOf(t)===-1&&{}.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}function Xr(e,r){if(e==null)return{};var t={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(r.indexOf(a)!==-1)continue;t[a]=e[a]}return t}var Hr=e=>{var{dataKey:r,name:t,stroke:a,legendType:n,hide:i}=e;return[{inactive:i,dataKey:r,type:n,color:a,value:Re(t,r),payload:e}]};function zr(e){var{dataKey:r,data:t,stroke:a,strokeWidth:n,fill:i,name:s,hide:l,unit:u}=e;return{dataDefinedOnItem:t,positions:void 0,settings:{stroke:a,strokeWidth:n,fill:i,dataKey:r,nameKey:void 0,name:Re(s,r),hide:l,type:e.tooltipType,color:e.stroke,unit:u}}}var Ye=(e,r)=>"".concat(r,"px ").concat(e-r,"px");function Zr(e,r){for(var t=e.length%2!==0?[...e,0]:e,a=[],n=0;n<r;++n)a=[...a,...t];return a}var Jr=(e,r,t)=>{var a=t.reduce((m,f)=>m+f);if(!a)return Ye(r,e);for(var n=Math.floor(e/a),i=e%a,s=r-e,l=[],u=0,p=0;u<t.length;p+=t[u],++u)if(p+t[u]>i){l=[...t.slice(0,u),i-p];break}var h=l.length%2===0?[0,s]:[s];return[...Zr(t,n),...l,...h].map(m=>"".concat(m,"px")).join(", ")};function ea(e){var{clipPathId:r,points:t,props:a}=e,{dot:n,dataKey:i,needClip:s}=a,{id:l}=a,u=de(a,Fr),p=Dt(u);return o.createElement(Rt,{points:t,dot:n,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:i,baseProps:p,needClip:s,clipPathId:r})}function ta(e){var{showLabels:r,children:t,points:a}=e,n=o.useMemo(()=>a?.map(i=>{var s,l,u={x:(s=i.x)!==null&&s!==void 0?s:0,y:(l=i.y)!==null&&l!==void 0?l:0,width:0,lowerWidth:0,upperWidth:0,height:0};return L(L({},u),{},{value:i.value,payload:i.payload,viewBox:u,parentViewBox:void 0,fill:void 0})}),[a]);return o.createElement(Nt,{value:r?n:void 0},t)}function we(e){var{clipPathId:r,pathRef:t,points:a,strokeDasharray:n,props:i}=e,{type:s,layout:l,connectNulls:u,needClip:p,shape:h}=i,m=de(i,Ur),f=L(L({},Q(m)),{},{fill:"none",className:"recharts-line-curve",clipPath:p?"url(#clipPath-".concat(r,")"):void 0,points:a,type:s,layout:l,connectNulls:u,strokeDasharray:n??i.strokeDasharray});return o.createElement(o.Fragment,null,a?.length>1&&o.createElement(kr,F({shapeType:"curve",option:h},f,{pathRef:t})),o.createElement(ea,{points:a,clipPathId:r,props:i}))}function ra(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function aa(e){var{clipPathId:r,props:t,pathRef:a,previousPointsRef:n,longestAnimatedLengthRef:i}=e,{points:s,strokeDasharray:l,isAnimationActive:u,animationBegin:p,animationDuration:h,animationEasing:m,animateNewValues:f,width:v,height:y,onAnimationEnd:g,onAnimationStart:j}=t,O=n.current,S=Ee(t,"recharts-line-"),[b,I]=o.useState(!1),N=!b,D=o.useCallback(()=>{typeof g=="function"&&g(),I(!1)},[g]),R=o.useCallback(()=>{typeof j=="function"&&j(),I(!0)},[j]),d=ra(a.current),$=i.current;return o.createElement(ta,{points:s,showLabels:N},t.children,o.createElement(Ae,{animationId:S,begin:p,duration:h,isActive:u,easing:m,onAnimationEnd:D,onAnimationStart:R,key:S},T=>{var J=k($,d+$,T),B=Math.min(J,d),_;if(u)if(l){var E="".concat(l).split(/[,\s]+/gim).map(x=>parseFloat(x));_=Jr(B,d,E)}else _=Ye(d,B);else _=l==null?void 0:String(l);if(O){var W=O.length/s.length,M=T===1?s:s.map((x,U)=>{var q=Math.floor(U*W);if(O[q]){var V=O[q];return L(L({},x),{},{x:k(V.x,x.x,T),y:k(V.y,x.y,T)})}return f?L(L({},x),{},{x:k(v*2,x.x,T),y:k(y/2,x.y,T)}):L(L({},x),{},{x:x.x,y:x.y})});return n.current=M,o.createElement(we,{props:t,points:M,clipPathId:r,pathRef:a,strokeDasharray:_})}return T>0&&d>0&&(n.current=s,i.current=B),o.createElement(we,{props:t,points:s,clipPathId:r,pathRef:a,strokeDasharray:_})}),o.createElement(It,{label:t.label}))}function na(e){var{clipPathId:r,props:t}=e,a=o.useRef(null),n=o.useRef(0),i=o.useRef(null);return o.createElement(aa,{props:t,clipPathId:r,previousPointsRef:a,longestAnimatedLengthRef:n,pathRef:i})}var ia=(e,r)=>{var t,a;return{x:(t=e.x)!==null&&t!==void 0?t:void 0,y:(a=e.y)!==null&&a!==void 0?a:void 0,value:e.value,errorVal:_e(e.payload,r)}};class sa extends o.Component{render(){var{hide:r,dot:t,points:a,className:n,xAxisId:i,yAxisId:s,top:l,left:u,width:p,height:h,id:m,needClip:f,zIndex:v}=this.props;if(r)return null;var y=oe("recharts-line",n),g=m,{r:j,strokeWidth:O}=Tt(t),S=Et(t),b=j*2+O;return o.createElement(At,{zIndex:v},o.createElement(Le,{className:y},f&&o.createElement("defs",null,o.createElement(Lt,{clipPathId:g,xAxisId:i,yAxisId:s}),!S&&o.createElement("clipPath",{id:"clipPath-dots-".concat(g)},o.createElement("rect",{x:u-b/2,y:l-b/2,width:p+b,height:h+b}))),o.createElement($r,{xAxisId:i,yAxisId:s,data:a,dataPointFormatter:ia,errorBarOffset:0},o.createElement(na,{props:this.props,clipPathId:g}))),o.createElement(kt,{activeDot:this.props.activeDot,points:a,mainColor:this.props.stroke,itemDataKey:this.props.dataKey}))}}var Qe={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:!Ot.isSsr,label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:yt.line};function oa(e){var r=le(e,Qe),{activeDot:t,animateNewValues:a,animationBegin:n,animationDuration:i,animationEasing:s,connectNulls:l,dot:u,hide:p,isAnimationActive:h,label:m,legendType:f,xAxisId:v,yAxisId:y,id:g}=r,j=de(r,Vr),{needClip:O}=jt(v,y),S=St(),b=wt(),I=De(),N=Ct(T=>Kr(T,v,y,I,g));if(b!=="horizontal"&&b!=="vertical"||N==null||S==null)return null;var{height:D,width:R,x:d,y:$}=S;return o.createElement(sa,F({},j,{id:g,connectNulls:l,dot:u,activeDot:t,animateNewValues:a,animationBegin:n,animationDuration:i,animationEasing:s,isAnimationActive:h,hide:p,label:m,legendType:f,xAxisId:v,yAxisId:y,points:N,layout:b,height:D,width:R,left:d,top:$,needClip:O}))}function la(e){var{layout:r,xAxis:t,yAxis:a,xAxisTicks:n,yAxisTicks:i,dataKey:s,bandSize:l,displayedData:u}=e;return u.map((p,h)=>{var m=_e(p,s);if(r==="horizontal"){var f=me({axis:t,ticks:n,bandSize:l,entry:p,index:h}),v=fe(m)?null:a.scale(m);return{x:f,y:v,value:m,payload:p}}var y=fe(m)?null:t.scale(m),g=me({axis:a,ticks:i,bandSize:l,entry:p,index:h});return y==null||g==null?null:{x:y,y:g,value:m,payload:p}}).filter(Boolean)}function ca(e){var r=le(e,Qe),t=De();return o.createElement(gt,{id:r.id,type:"line"},a=>o.createElement(o.Fragment,null,o.createElement(bt,{legendPayload:Hr(r)}),o.createElement(xt,{fn:zr,args:r}),o.createElement(Pt,{type:"line",id:a,data:r.data,xAxisId:r.xAxisId,yAxisId:r.yAxisId,zAxisId:0,dataKey:r.dataKey,hide:r.hide,isPanorama:t}),o.createElement(oa,F({},r,{id:a}))))}var Ge=o.memo(ca);Ge.displayName="Line";var ua=["axis"],da=o.forwardRef((e,r)=>o.createElement(_t,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:ua,tooltipPayloadSearcher:$t,categoricalChartProps:e,ref:r}));const pa=async({queryKey:e})=>{const[,r]=e,{data:t}=await se.get("/admin/users",{params:r});return t},ma=async()=>{const{data:e}=await se.get("/admin/users/stats");return e},fa=async({userId:e,isBlocked:r})=>{const{data:t}=await se.patch(`/admin/users/${e}/status`,{isBlocked:r});return t},K="customers",va="customerStats",ha=e=>Ce({queryKey:[K,e],queryFn:pa,keepPreviousData:!0}),ya=()=>Ce({queryKey:[va],queryFn:ma,staleTime:1e3*60}),ga=()=>{const e=et();return tt({mutationFn:fa,onMutate:async({userId:r,isBlocked:t})=>{await e.cancelQueries({queryKey:[K]});const a=e.getQueryData([K]);return e.setQueriesData({queryKey:[K]},n=>!n||!n.data||!n.data.users?n:{...n,data:{...n.data,users:n.data.users.map(i=>i._id===r?{...i,isBlocked:t,status:t?"blocked":"active"}:i)}}),{previousCustomers:a}},onError:(r,t,a)=>{a?.previousCustomers&&e.setQueryData([K],a.previousCustomers)}})},ba=e=>{const r=e?.data||{},t=[{title:"Total Customers",value:r.totalCustomers?.value.toLocaleString()||0,percentage:r.totalCustomers?.percentageChange||0},{title:"New Customers",value:r.newCustomers?.count.toLocaleString()||0,percentage:r.newCustomers?.percentageChange||0},{title:"Visitor",value:r.visitors?.count.toLocaleString()||0,percentage:r.visitors?.percentageChange||0}],a=[{value:r.customerOverview?.active.toLocaleString()||0,title:"Active Customers"},{value:r.customerOverview?.repeat.toLocaleString()||0,title:"Repeat Customers"},{value:r.customerOverview?.shopVisitor.toLocaleString()||0,title:"Shop Visitor"},{value:`${r.customerOverview?.conversionRate||0}%`,title:"Conversion Rate"}],n=r.dailyActivity||[];return{mainStats:t,overviewStats:a,chartData:n}},xa=()=>{const{queryParams:e,uiState:r,handlers:t}=rt({defaultSortBy:"createdAt",defaultSortOrder:"desc"}),[a,n]=o.useState({isOpen:!1,item:null}),{data:i,isLoading:s,isError:l,error:u}=ha(e),{data:p,isLoading:h,isError:m,error:f}=ya(),{mutate:v,isLoading:y}=ga(),g=()=>{const d=a.item;!d||y||(n({isOpen:!1,item:null}),v({userId:d._id,isBlocked:!d.isBlocked}))},j=d=>{n({isOpen:!0,item:d})},O=()=>{n({isOpen:!1,item:null})},S=[{header:"Customer Id",key:"id",sortable:!1,render:d=>c.jsxs("span",{className:"font-medium text-gray-900",children:["#",d._id.slice(-7).toUpperCase()]})},{header:"Name",key:"firstName",sortable:!0,render:d=>c.jsxs("span",{className:"text-gray-700",children:[d.firstName," ",d.lastName]})},{header:"Phone",key:"phone",sortable:!1,render:d=>c.jsx("span",{className:"text-gray-700",children:d.phone})},{header:"Order Count",key:"orderCount",sortable:!1,render:d=>c.jsx("span",{className:"text-gray-700",children:d.orderCount||25})},{header:"Total Spend",key:"totalSpend",sortable:!1,render:d=>c.jsxs("span",{className:"text-gray-700",children:["â‚¹",(d.totalSpend||3450).toFixed(2)]})},{header:"Status",key:"status",sortable:!1,render:d=>c.jsx(st,{status:d.status,isBlocked:d.isBlocked})},{header:"Action",key:"action",sortable:!1,render:d=>c.jsx(ot,{isBlocked:d.isBlocked,isLoading:y,disabled:y,onClick:()=>j(d)})}],{mainStats:b,overviewStats:I,chartData:N}=ba(p),D=i?.data?.users||[],R=i?.data?.pagination;return{isLoading:s||h,isError:l||m,error:u||f,stats:{mainStats:b,overviewStats:I,chartData:N},table:{columns:S,data:D,pagination:R},filters:{...r,handleSearch:t.onSearchChange,handleStatusChange:t.onStatusChange,handleLimitChange:t.onLimitChange,handleSort:t.onSort,handlePageChange:t.onPageChange},modal:{isOpen:a.isOpen,item:a.item,isLoading:y,onClose:O,onConfirm:g}}},Xe=({title:e,value:r,percentage:t,timeframe:a})=>{const n=t>=0;return c.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-5 hover:shadow-md transition-shadow duration-20 ",children:[c.jsx("h3",{className:"text-md font-semibold text-gray-700",children:e}),c.jsxs("div",{className:"mt-2 flex items-end justify-between",children:[c.jsx("p",{className:"text-3xl font-bold text-gray-900",children:r}),c.jsxs("div",{className:`flex items-center text-sm font-medium ${n?"text-green-500":"text-red-500"}`,children:[n?c.jsx(lt,{className:"h-4 w-4"}):c.jsx(Ut,{className:"h-4 w-4"}),t.toFixed(1),"%"]})]}),c.jsx("p",{className:"text-xs text-gray-400 mt-2",children:a})]})};Xe.propTypes={title:P.string.isRequired,value:P.oneOfType([P.number,P.string]).isRequired,percentage:P.number.isRequired,timeframe:P.string};const He=({value:e,title:r})=>c.jsxs("div",{className:"text-center md:text-left",children:[c.jsx("p",{className:"text-3xl font-bold text-gray-900",children:e}),c.jsx("p",{className:"text-sm text-gray-500",children:r})]});He.propTypes={value:P.oneOfType([P.number,P.string]).isRequired,title:P.string.isRequired};const ze=({data:e})=>{const r=({active:t,payload:a,label:n})=>t&&a&&a.length?c.jsxs("div",{className:"bg-gray-900 text-white p-3 rounded-md shadow-lg",children:[c.jsx("p",{className:"text-sm font-bold",children:`${a[0].value.toLocaleString()} new users`}),c.jsx("p",{className:"text-xs",children:n})]}):null;return c.jsx("div",{style:{width:"100%",height:250,minWidth:0},children:c.jsx(Bt,{children:c.jsxs(da,{data:e,margin:{top:5,right:20,left:-20,bottom:2},children:[c.jsx(Wt,{strokeDasharray:"3 3",vertical:!1,stroke:"#e5e7eb"}),c.jsx(Mt,{dataKey:"date",tickLine:!1,axisLine:!1,tick:{fontSize:12,fill:"#6b7280"}}),c.jsx(qt,{tickLine:!1,axisLine:!1,tick:{fontSize:12,fill:"#6b7280"},tickFormatter:t=>`${t/1e3}k`}),c.jsx(Kt,{content:c.jsx(r,{}),cursor:{stroke:"#22c55e",strokeWidth:2}}),c.jsx(Ge,{type:"monotone",dataKey:"newCustomers",stroke:"#22c55e",strokeWidth:3,dot:!1,activeDot:{r:8,stroke:"#fff",strokeWidth:2,fill:"#22c55e"}})]})})})};ze.propTypes={data:P.arrayOf(P.shape({date:P.string.isRequired,newCustomers:P.number.isRequired})).isRequired};const Ca=()=>{const{isLoading:e,isError:r,error:t,stats:a,table:n,filters:i,modal:s}=xa();return e?c.jsxs("div",{className:"p-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Customers"}),c.jsx("p",{className:"text-gray-500 mt-4",children:"Loading customer data..."})]}):r?c.jsxs("div",{className:"p-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Customers"}),c.jsxs("p",{className:"text-red-500 mt-4",children:["Error loading data: ",t.message]})]}):c.jsxs("div",{className:"p-6 bg-gray-50/50 min-h-screen",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Customers"}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[c.jsx("div",{className:"lg:col-span-1 divide-gray-200 space-y-4",children:a.mainStats.map(l=>c.jsx(Xe,{title:l.title,value:l.value,percentage:l.percentage,timeframe:"Last 7 days"},l.title))}),c.jsxs("div",{className:"lg:col-span-3 bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[c.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Customer Overview"}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 mt-4",children:a.overviewStats.map(l=>c.jsx(He,{value:l.value,title:l.title},l.title))}),c.jsx("div",{className:"mt-8",style:{width:"100%",height:"250px"},children:c.jsx(ze,{data:a.chartData})})]})]}),c.jsx("div",{className:"mt-6",children:c.jsx(at,{title:"Customer List",columns:n.columns,data:n.data,pagination:n.pagination,isLoading:e,error:t,statusOptions:nt,searchValue:i.searchTerm,onSearchChange:i.handleSearch,status:i.status,onStatusChange:i.handleStatusChange,limit:i.limit,onLimitChange:i.handleLimitChange,sortConfig:i.sortConfig,onSort:i.handleSort,onPageChange:i.handlePageChange})}),c.jsx(it,{isOpen:s.isOpen,onClose:s.onClose,onConfirm:s.onConfirm,title:s.item?.isBlocked?"Unblock Customer?":"Block Customer?",message:`Are you sure you want to ${s.item?.isBlocked?"unblock":"block"} ${s.item?.firstName} ${s.item?.lastName}?`,confirmButtonText:s.item?.isBlocked?"Yes, Unblock":"Yes, Block",confirmButtonVariant:"danger",isLoading:s.isLoading})]})};export{Ca as default};
