import{c as j,u as b,a as y,j as e,an as f,g as x,r as d,a1 as v,W as N,ao as w,t as T}from"./index-199rnzlN.js";import{A as C}from"./arrow-up-right-BvksskyJ.js";const D=[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]],I=j("arrow-down-left",D),k="walletData",A=s=>b({queryKey:[k,s],queryFn:async()=>{const{data:t}=await y.get("/wallet",{params:s});return t},keepPreviousData:!0,staleTime:1e3*60*1}),E=({balance:s})=>e.jsx("div",{className:"bg-gradient-to-r from-gray-900 to-black text-white p-6 rounded-xl shadow-lg mb-8 flex flex-col md:flex-row justify-between items-center gap-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-white/10 rounded-full backdrop-blur-sm",children:e.jsx(f,{size:32,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 font-medium mb-1",children:"Available Balance"}),e.jsx("h2",{className:"text-3xl font-bold",children:x(s)})]})]})}),L=({transaction:s})=>{const t=s.type==="CREDIT",r=s.status==="SUCCESS",l=t?I:C,a=t?"text-green-600 bg-green-50":"text-red-600 bg-red-50",n=new Date(s.createdAt).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}),i=new Date(s.createdAt).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100 last:border-0 hover:bg-gray-50 transition-colors rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-2.5 rounded-full ${a}`,children:e.jsx(l,{size:20})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-gray-900 text-sm",children:[s.reason.replace(/_/g," ")," "]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:n}),e.jsx("span",{children:"•"}),e.jsx("span",{children:i}),s.orderId&&e.jsxs("span",{className:"hidden sm:inline",children:["• Order #",s.orderId.slice(-6).toUpperCase()]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`font-bold ${t?"text-green-600":"text-black"}`,children:[t?"+":"-",x(s.amount)]}),e.jsx("span",{className:`text-[10px] font-medium uppercase px-2 py-0.5 rounded-full 
          ${r?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:s.status})]})]})},S=({transactions:s})=>s.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-400",children:[e.jsx(Clock,{size:48,className:"mb-4 opacity-50",strokeWidth:1.5}),e.jsx("p",{children:"No transactions yet."})]}):e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50/50",children:e.jsx("h3",{className:"font-semibold text-gray-900",children:"Transaction History"})}),e.jsx("div",{className:"divide-y divide-gray-100",children:s.map(t=>e.jsx(L,{transaction:t},t._id))})]}),R=()=>{const[s,t]=d.useState(1),[r,l]=d.useState(""),{data:a,isLoading:n,isError:i,error:m}=A({page:s,limit:5,type:r||void 0}),g=a?.data?.balance||0,h=a?.data?.transactions||[],o=a?.data?.pagination,u=c=>{t(c),window.scrollTo({top:0,behavior:"smooth"})},p=c=>{l(c.target.value),t(1)};return n?e.jsx(v,{text:"Loading wallet..."}):i?e.jsx(N,{error:m}):e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"My Wallet"}),e.jsx(E,{balance:g}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-700",children:"Recent Transactions"}),e.jsxs("div",{className:"relative",children:[e.jsx(w,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsxs("select",{value:r,onChange:p,className:"pl-9 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-black focus:border-black bg-white",children:[e.jsx("option",{value:"",children:"All Transactions"}),e.jsx("option",{value:"CREDIT",children:"Credits (+)"}),e.jsx("option",{value:"DEBIT",children:"Debits (-)"})]})]})]}),e.jsx(S,{transactions:h}),o&&o.totalPages>1&&e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx(T,{pagination:o,onPageChange:u})})]})};export{R as default};
