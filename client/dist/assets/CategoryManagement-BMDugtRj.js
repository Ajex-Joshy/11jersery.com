import{c as S,O as k,av as v,r as D,j as t,L as w,h as O,aw as T,C as A,g as d}from"./index-199rnzlN.js";import{u as M,a as E,b as P}from"./categoryHooks-CqBOlkk9.js";import{L as _,a as B}from"./UiElements-BI6dWPc4.js";import"./pen-HmXN4Xp4.js";const I=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],U=S("image",I),$=({data:a})=>t.jsxs("div",{className:"flex items-center gap-4 p-4 bg-white border border-gray-200 rounded-lg shadow-sm",children:[t.jsxs("div",{className:"shrink-0 w-16 h-16 bg-gray-100 rounded-md flex items-center justify-center",children:[console.log(a.imageUrl),a?.imageUrl?t.jsx("img",{src:a.imageUrl,alt:a.title,className:"w-16 h-16 object-cover rounded-md"}):t.jsx(U,{className:"w-8 h-8 text-gray-400"})]}),t.jsx("h3",{className:"font-semibold text-gray-900",children:a?.title})]}),z=()=>{const a=k(),{queryParams:n,uiState:o,handlers:i}=v({defaultSortBy:"createdAt",defaultSortOrder:"desc"}),[s,g]=D.useState({isOpen:!1,item:null,action:null}),{data:l,isLoading:x,isError:h,error:y}=M(n);console.log(l);const{mutate:f,isLoading:p}=E(),{mutate:j,isLoading:C}=P(),m=(e,r)=>{g({isOpen:!0,item:e,action:r})},c=()=>{g({isOpen:!1,item:null,action:null})},b=()=>{const{item:e,action:r}=s;e&&(r==="toggleList"?f({categoryId:e._id,isListed:!e.isListed},{onSettled:c}):r==="delete"&&j(e._id,{onSettled:c}))},L=[{header:"SNO",key:"sno",sortable:!1,render:(e,r)=>t.jsx("span",{className:"font-medium text-gray-900",children:(n.page-1)*n.limit+r+1})},{header:"Category Name",key:"title",sortable:!0,render:e=>t.jsx("span",{className:"font-medium text-gray-900",children:e.title})},{header:"Stock",key:"totalStock",sortable:!0,render:e=>t.jsx("span",{className:"text-gray-700",children:e.totalStock??"N/A"})},{header:"Date Added",key:"createdAt",sortable:!0,render:e=>t.jsx("span",{className:"text-gray-700",children:new Date(e.createdAt).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})})},{header:"Offer Details",key:"discount",sortable:!0,render:e=>{if(e.discount>0&&e.discountType){if(e.discountType==="flat")return t.jsxs("div",{className:"text-sm",children:[t.jsxs("span",{className:"font-semibold text-gray-800",children:[d(e?.discount)," Off"]}),t.jsxs("span",{className:"block text-xs text-gray-500",children:["Min: ",d(e?.minPurchaseAmount)]})]});if(e.discountType==="percent")return t.jsxs("div",{className:"text-sm",children:[t.jsxs("span",{className:"font-semibold text-gray-800",children:[e.discount,"% Off"]}),t.jsxs("span",{className:"block text-xs text-gray-500",children:["Max: ",d(e?.maxRedeemable)]})]})}return t.jsx("span",{className:"text-gray-500 text-sm",children:"-"})}},{header:"Status",key:"isListed",sortable:!0,render:e=>t.jsx(_,{isListed:e.isListed,onClick:()=>m(e,"toggleList")})},{header:"Action",key:"action",sortable:!1,render:e=>t.jsx(B,{onEdit:()=>a(`/admin/edit-category/${e.slug}`),onDelete:()=>m(e,"delete")})}],u=l?.data?.categories||[],N=l?.data?.pagination;return t.jsxs("div",{className:"p-6 bg-gray-50/50 min-h-screen",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Categories"}),t.jsxs(w,{to:"/admin/add-category",className:"bg-black text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 hover:bg-gray-800 transition",children:[t.jsx(O,{className:"w-4 h-4"}),"Add Category"]})]}),t.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Discover"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 mb-8",children:u.map(e=>t.jsx($,{data:e},e._id))}),t.jsx(T,{title:"Category List",columns:L,data:u,isLoading:x,isError:h,error:y,searchValue:o.searchTerm,status:o.status,limit:o.limit,sortConfig:o.sortConfig,onSearchChange:i.onSearchChange,onStatusChange:i.onStatusChange,onLimitChange:i.onLimitChange,onSort:i.onSort,pagination:N,onPageChange:i.onPageChange}),t.jsx(A,{isOpen:s.isOpen,onClose:c,onConfirm:b,isLoading:p||C,title:s.action==="delete"?"Delete Category?":s.item?.isListed?"Unlist Category?":"List Category?",message:`Are you sure you want to ${s.action==="delete"?`delete the category "${s.item?.title}"? This cannot be undone.`:s.item?.isListed?`unlist the category "${s.item?.title}"?`:`list the category "${s.item?.title}"?`}`,confirmButtonText:s.action==="delete"?"Yes, Delete":s.item?.isListed?"Yes, Unlist":"Yes, List",confirmButtonVariant:s.action==="delete"?"danger":"primary"})]})};export{z as default};
