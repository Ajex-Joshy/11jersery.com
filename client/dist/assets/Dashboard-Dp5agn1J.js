import{c as me,u as xe,a as ve,r as o,j as n,g as K,as as fe,a1 as ye,W as ge,an as be,ap as Ae,at as je}from"./index-BqlAPq8n.js";import{c as G,s as V,a as J,b as Q,d as Pe,e as Ie,f as F,g as Ee,i as ee,h as $,j as Se,r as ae,D as Ne,u as te,R as Ce,S as ke,k as we,l as Oe,m as De,G as Le,n as re,o as Re,p as Te,q as We,t as _e,v as Me,w as ze,x as Be,y as Ke,Z as Ge,L as _,z as Ve,A as Y,B as H,C as X,E as L,F as Fe,J as $e,H as O,I as Ye,K as He,M as Xe,N as Ue,O as ie,P as qe,Q as B,T as Ze,U as M,V as Je,W as Qe,X as ea,Y as aa,_ as ta,$ as ra,a0 as ia}from"./CartesianChart-DnTwVgXE.js";import{U as na}from"./users-D71KAJ1U.js";const sa=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],la=me("trophy",sa),oa="dashboardStats",da=async()=>{const{data:t}=await ve.get("/admin/dashboard/stats");return t.data},ca=()=>xe({queryKey:[oa],queryFn:da,staleTime:1e3*60*5});var ne=(t,e,r,a)=>J(t,"xAxis",e,a),se=(t,e,r,a)=>Q(t,"xAxis",e,a),le=(t,e,r,a)=>J(t,"yAxis",r,a),oe=(t,e,r,a)=>Q(t,"yAxis",r,a),ua=G([V,ne,le,se,oe],(t,e,r,a,l)=>ee(t,"xAxis")?$(e,a,!1):$(r,l,!1)),pa=(t,e,r,a,l)=>l,de=G([Se,pa],(t,e)=>t.filter(r=>r.type==="area").find(r=>r.id===e)),ha=(t,e,r,a,l)=>{var i,d=de(t,e,r,a,l);if(d!=null){var s=V(t),c=ee(s,"xAxis"),u;if(c?u=F(t,"yAxis",r,a):u=F(t,"xAxis",e,a),u!=null){var{stackId:v}=d,g=Ee(d);if(!(v==null||g==null)){var x=(i=u[v])===null||i===void 0?void 0:i.stackedData;return x?.find(m=>m.key===g)}}}},ma=G([V,ne,le,se,oe,ha,Pe,ua,de,Ie],(t,e,r,a,l,i,d,s,c,u)=>{var{chartData:v,dataStartIndex:g,dataEndIndex:x}=d;if(!(c==null||t!=="horizontal"&&t!=="vertical"||e==null||r==null||a==null||l==null||a.length===0||l.length===0||s==null)){var{data:m}=c,f;if(m&&m.length>0?f=m:f=v?.slice(g,x+1),f!=null)return La({layout:t,xAxis:e,yAxis:r,xAxisTicks:a,yAxisTicks:l,dataStartIndex:g,areaSettings:c,stackedData:i,displayedData:f,chartBaseValue:u,bandSize:s})}}),xa=["id"],va=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function w(){return w=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)({}).hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},w.apply(null,arguments)}function ce(t,e){if(t==null)return{};var r,a,l=fa(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)r=i[a],e.indexOf(r)===-1&&{}.propertyIsEnumerable.call(t,r)&&(l[r]=t[r])}return l}function fa(t,e){if(t==null)return{};var r={};for(var a in t)if({}.hasOwnProperty.call(t,a)){if(e.indexOf(a)!==-1)continue;r[a]=t[a]}return r}function U(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),r.push.apply(r,a)}return r}function D(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?U(Object(r),!0).forEach(function(a){ya(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function ya(t,e,r){return(e=ga(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ga(t){var e=ba(t,"string");return typeof e=="symbol"?e:e+""}function ba(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,e);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function z(t,e){return t&&t!=="none"?t:e}var Aa=t=>{var{dataKey:e,name:r,stroke:a,fill:l,legendType:i,hide:d}=t;return[{inactive:d,dataKey:e,type:i,color:z(a,l),value:re(r,e),payload:t}]};function ja(t){var{dataKey:e,data:r,stroke:a,strokeWidth:l,fill:i,name:d,hide:s,unit:c}=t;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:a,strokeWidth:l,fill:i,dataKey:e,nameKey:void 0,name:re(d,e),hide:s,type:t.tooltipType,color:z(a,i),unit:c}}}function Pa(t){var{clipPathId:e,points:r,props:a}=t,{needClip:l,dot:i,dataKey:d}=a,s=ie(a);return o.createElement(Ze,{points:r,dot:i,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:d,baseProps:s,needClip:l,clipPathId:e})}function Ia(t){var{showLabels:e,children:r,points:a}=t,l=a.map(i=>{var d,s,c={x:(d=i.x)!==null&&d!==void 0?d:0,y:(s=i.y)!==null&&s!==void 0?s:0,width:0,lowerWidth:0,upperWidth:0,height:0};return D(D({},c),{},{value:i.value,payload:i.payload,parentViewBox:void 0,viewBox:c,fill:void 0})});return o.createElement(Ue,{value:e?l:void 0},r)}function q(t){var{points:e,baseLine:r,needClip:a,clipPathId:l,props:i}=t,{layout:d,type:s,stroke:c,connectNulls:u,isRange:v}=i,{id:g}=i,x=ce(i,xa),m=ie(x),f=qe(x);return o.createElement(o.Fragment,null,e?.length>1&&o.createElement(_,{clipPath:a?"url(#clipPath-".concat(l,")"):void 0},o.createElement(B,w({},f,{id:g,points:e,connectNulls:u,type:s,baseLine:r,layout:d,stroke:"none",className:"recharts-area-area"})),c!=="none"&&o.createElement(B,w({},m,{className:"recharts-area-curve",layout:d,type:s,connectNulls:u,fill:"none",points:e})),c!=="none"&&v&&o.createElement(B,w({},m,{className:"recharts-area-curve",layout:d,type:s,connectNulls:u,fill:"none",points:r}))),o.createElement(Pa,{points:e,props:x,clipPathId:l}))}function Ea(t){var{alpha:e,baseLine:r,points:a,strokeWidth:l}=t,i=a[0].y,d=a[a.length-1].y;if(!M(i)||!M(d))return null;var s=e*Math.abs(i-d),c=Math.max(...a.map(u=>u.x||0));return L(r)?c=Math.max(r,c):r&&Array.isArray(r)&&r.length&&(c=Math.max(...r.map(u=>u.x||0),c)),L(c)?o.createElement("rect",{x:0,y:i<d?i:i-s,width:c+(l?parseInt("".concat(l),10):1),height:Math.floor(s)}):null}function Sa(t){var{alpha:e,baseLine:r,points:a,strokeWidth:l}=t,i=a[0].x,d=a[a.length-1].x;if(!M(i)||!M(d))return null;var s=e*Math.abs(i-d),c=Math.max(...a.map(u=>u.y||0));return L(r)?c=Math.max(r,c):r&&Array.isArray(r)&&r.length&&(c=Math.max(...r.map(u=>u.y||0),c)),L(c)?o.createElement("rect",{x:i<d?i:i-s,y:0,width:s,height:Math.floor(c+(l?parseInt("".concat(l),10):1))}):null}function Na(t){var{alpha:e,layout:r,points:a,baseLine:l,strokeWidth:i}=t;return r==="vertical"?o.createElement(Ea,{alpha:e,points:a,baseLine:l,strokeWidth:i}):o.createElement(Sa,{alpha:e,points:a,baseLine:l,strokeWidth:i})}function Ca(t){var{needClip:e,clipPathId:r,props:a,previousPointsRef:l,previousBaselineRef:i}=t,{points:d,baseLine:s,isAnimationActive:c,animationBegin:u,animationDuration:v,animationEasing:g,onAnimationStart:x,onAnimationEnd:m}=a,f=Fe(a,"recharts-area-"),[A,b]=o.useState(!1),E=!A,P=o.useCallback(()=>{typeof m=="function"&&m(),b(!1)},[m]),I=o.useCallback(()=>{typeof x=="function"&&x(),b(!0)},[x]),p=l.current,y=i.current;return o.createElement(Ia,{showLabels:E,points:d},a.children,o.createElement($e,{animationId:f,begin:u,duration:v,isActive:c,easing:g,onAnimationEnd:P,onAnimationStart:I,key:f},h=>{if(p){var N=p.length/d.length,T=h===1?d:d.map((j,R)=>{var C=Math.floor(R*N);if(p[C]){var k=p[C];return D(D({},j),{},{x:O(k.x,j.x,h),y:O(k.y,j.y,h)})}return j}),S;return L(s)?S=O(y,s,h):Ye(s)||He(s)?S=O(y,0,h):S=s.map((j,R)=>{var C=Math.floor(R*N);if(Array.isArray(y)&&y[C]){var k=y[C];return D(D({},j),{},{x:O(k.x,j.x,h),y:O(k.y,j.y,h)})}return j}),h>0&&(l.current=T,i.current=S),o.createElement(q,{points:T,baseLine:S,needClip:e,clipPathId:r,props:a})}return h>0&&(l.current=d,i.current=s),o.createElement(_,null,c&&o.createElement("defs",null,o.createElement("clipPath",{id:"animationClipPath-".concat(r)},o.createElement(Na,{alpha:h,points:d,baseLine:s,layout:a.layout,strokeWidth:a.strokeWidth}))),o.createElement(_,{clipPath:"url(#animationClipPath-".concat(r,")")},o.createElement(q,{points:d,baseLine:s,needClip:e,clipPathId:r,props:a})))}),o.createElement(Xe,{label:a.label}))}function ka(t){var{needClip:e,clipPathId:r,props:a}=t,l=o.useRef(null),i=o.useRef();return o.createElement(Ca,{needClip:e,clipPathId:r,props:a,previousPointsRef:l,previousBaselineRef:i})}class wa extends o.PureComponent{render(){var{hide:e,dot:r,points:a,className:l,top:i,left:d,needClip:s,xAxisId:c,yAxisId:u,width:v,height:g,id:x,baseLine:m,zIndex:f}=this.props;if(e)return null;var A=ze("recharts-area",l),b=x,{r:E,strokeWidth:P}=Be(r),I=Ke(r),p=E*2+P;return o.createElement(Ge,{zIndex:f},o.createElement(_,{className:A},s&&o.createElement("defs",null,o.createElement(Ve,{clipPathId:b,xAxisId:c,yAxisId:u}),!I&&o.createElement("clipPath",{id:"clipPath-dots-".concat(b)},o.createElement("rect",{x:d-p/2,y:i-p/2,width:v+p,height:g+p}))),o.createElement(ka,{needClip:s,clipPathId:b,props:this.props})),o.createElement(Y,{points:a,mainColor:z(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}),this.props.isRange&&Array.isArray(m)&&o.createElement(Y,{points:m,mainColor:z(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}var ue={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:!Le.isSsr,legendType:"line",stroke:"#3182bd",xAxisId:0,yAxisId:0,zIndex:Ne.area};function Oa(t){var e,r=ae(t,ue),{activeDot:a,animationBegin:l,animationDuration:i,animationEasing:d,connectNulls:s,dot:c,fill:u,fillOpacity:v,hide:g,isAnimationActive:x,legendType:m,stroke:f,xAxisId:A,yAxisId:b}=r,E=ce(r,va),P=Re(),I=Te(),{needClip:p}=We(A,b),y=te(),{points:h,isRange:N,baseLine:T}=(e=_e(he=>ma(he,A,b,y,t.id)))!==null&&e!==void 0?e:{},S=Me();if(P!=="horizontal"&&P!=="vertical"||S==null||I!=="AreaChart"&&I!=="ComposedChart")return null;var{height:j,width:R,x:C,y:k}=S;return!h||!h.length?null:o.createElement(wa,w({},E,{activeDot:a,animationBegin:l,animationDuration:i,animationEasing:d,baseLine:T,connectNulls:s,dot:c,fill:u,fillOpacity:v,height:j,hide:g,layout:P,isAnimationActive:x,isRange:N,legendType:m,needClip:p,points:h,stroke:f,width:R,left:C,top:k,xAxisId:A,yAxisId:b}))}var Da=(t,e,r,a,l)=>{var i=r??e;if(L(i))return i;var d=t==="horizontal"?l:a,s=d.scale.domain();if(d.type==="number"){var c=Math.max(s[0],s[1]),u=Math.min(s[0],s[1]);return i==="dataMin"?u:i==="dataMax"||c<0?c:Math.max(Math.min(s[0],s[1]),0)}return i==="dataMin"?s[0]:i==="dataMax"?s[1]:s[0]};function La(t){var{areaSettings:{connectNulls:e,baseValue:r,dataKey:a},stackedData:l,layout:i,chartBaseValue:d,xAxis:s,yAxis:c,displayedData:u,dataStartIndex:v,xAxisTicks:g,yAxisTicks:x,bandSize:m}=t,f=l&&l.length,A=Da(i,d,r,s,c),b=i==="horizontal",E=!1,P=u.map((p,y)=>{var h;f?h=l[v+y]:(h=H(p,a),Array.isArray(h)?E=!0:h=[A,h]);var N=h[1]==null||f&&!e&&H(p,a)==null;return b?{x:X({axis:s,ticks:g,bandSize:m,entry:p,index:y}),y:N?null:c.scale(h[1]),value:h,payload:p}:{x:N?null:s.scale(h[1]),y:X({axis:c,ticks:x,bandSize:m,entry:p,index:y}),value:h,payload:p}}),I;return f||E?I=P.map(p=>{var y=Array.isArray(p.value)?p.value[0]:null;return b?{x:p.x,y:y!=null&&p.y!=null?c.scale(y):null,payload:p.payload}:{x:y!=null?s.scale(y):null,y:p.y,payload:p.payload}}):I=b?c.scale(A):s.scale(A),{points:P,baseLine:I,isRange:E}}function Ra(t){var e=ae(t,ue),r=te();return o.createElement(Ce,{id:e.id,type:"area"},a=>o.createElement(o.Fragment,null,o.createElement(ke,{legendPayload:Aa(e)}),o.createElement(we,{fn:ja,args:e}),o.createElement(Oe,{type:"area",id:a,data:e.data,dataKey:e.dataKey,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,stackId:De(e.stackId),hide:e.hide,barSize:void 0,baseValue:e.baseValue,isPanorama:r,connectNulls:e.connectNulls}),o.createElement(Oa,w({},e,{id:a}))))}var pe=o.memo(Ra);pe.displayName="Area";var Ta=["axis"],Wa=o.forwardRef((t,e)=>o.createElement(Je,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Ta,tooltipPayloadSearcher:Qe,categoricalChartProps:t,ref:e}));const _a=({data:t,filter:e,onFilterChange:r})=>n.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Sales Overview Report"}),n.jsxs("select",{value:e,onChange:a=>r(a.target.value),className:"border border-gray-300 rounded-md text-sm py-1.5 px-3 focus:ring-green-600 focus:border-green-600 bg-white",children:[n.jsx("option",{value:"daily",children:"Daily"}),n.jsx("option",{value:"weekly",children:"Weekly"}),n.jsx("option",{value:"monthly",children:"Monthly"}),n.jsx("option",{value:"yearly",children:"Yearly"})]})]}),n.jsx("div",{className:"h-[350px] w-full",children:n.jsx(ea,{width:"100%",height:"100%",children:n.jsxs(Wa,{data:t,margin:{top:10,right:30,left:0,bottom:0},children:[n.jsx("defs",{children:n.jsxs("linearGradient",{id:"colorSalesGreen",x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:"5%",stopColor:"#16A34A",stopOpacity:.1}),n.jsx("stop",{offset:"95%",stopColor:"#16A34A",stopOpacity:0})]})}),n.jsx(aa,{dataKey:"_id",axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:"#9CA3AF"},dy:10}),n.jsx(ta,{axisLine:!1,tickLine:!1,tick:{fontSize:12,fill:"#9CA3AF"},tickFormatter:a=>`â‚¹${a/100}`}),n.jsx(ra,{vertical:!1,stroke:"#E5E7EB",strokeDasharray:"3 3"}),n.jsx(ia,{contentStyle:{backgroundColor:"#fff",borderRadius:"8px",border:"1px solid #E5E7EB",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"},formatter:a=>[`${K(a)}`,"Revenue"]}),n.jsx(pe,{type:"monotone",dataKey:"totalSales",stroke:"#16A34A",strokeWidth:2,fillOpacity:1,fill:"url(#colorSalesGreen)"})]})})})]}),Z=({title:t,data:e,type:r="product"})=>n.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm h-full",children:[n.jsxs("h2",{className:"text-lg font-bold text-gray-900 mb-6 flex items-center gap-2",children:[n.jsx(la,{size:18,className:"text-yellow-500"}),t]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm text-left",children:[n.jsx("thead",{className:"text-xs text-gray-500 uppercase bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 rounded-l-lg",children:"Name"}),n.jsx("th",{className:"px-4 py-3",children:"Sold"}),n.jsx("th",{className:"px-4 py-3 rounded-r-lg text-right",children:r==="product"?"Revenue":"Growth"})]})}),n.jsxs("tbody",{className:"divide-y divide-gray-100",children:[e.map((a,l)=>n.jsxs("tr",{className:"hover:bg-gray-50",children:[n.jsxs("td",{className:"px-4 py-3 font-medium text-gray-900 truncate max-w-[150px]",children:[l+1,". ",a.title||a.name]}),n.jsx("td",{className:"px-4 py-3 text-gray-600",children:a.totalSold}),n.jsx("td",{className:"px-4 py-3 text-right font-medium text-gray-900",children:r==="product"?`${K(a.totalRevenue)}`:`${Math.round(a.totalSold/10*100)/10}%`})]},a._id)),e.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:"3",className:"text-center py-4 text-gray-500",children:"No data available"})})]})]})})]}),W=({title:t,value:e,trend:r,icon:a,colorClass:l})=>n.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray-200 shadow-sm",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-500",children:t}),n.jsx("h3",{className:"text-2xl font-bold text-gray-900 mt-1",children:e})]}),n.jsx("div",{className:`p-3 rounded-lg ${l}`,children:n.jsx(a,{size:24})})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsxs("span",{className:`font-medium ${r>=0?"text-green-600":"text-red-600"}`,children:[r>0?"+":"",r,"%"]}),n.jsx("span",{className:"text-gray-400",children:"vs last month"})]})]}),Ka=()=>{const{data:t,isLoading:e,isError:r,error:a}=ca(),[l,i]=o.useState("daily"),{data:d}=fe({period:l,limit:1e3});if(e)return n.jsx(ye,{text:"Loading dashboard..."});if(r)return n.jsx(ge,{error:a});const{stats:s,bestSellingProducts:c,bestSellingCategories:u}=t?.payload||{},v=d?.payload?.report||[];return n.jsxs("div",{className:"p-6 bg-gray-50/50 min-h-screen",children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-8",children:"Dashboard"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[n.jsx(W,{title:"Total Revenue",value:`${K(s.monthly?.currentRevenue)}`,trend:s.monthly?.growthPercentage||0,icon:be,colorClass:"bg-green-50 text-green-600"}),n.jsx(W,{title:"Total Orders",value:s.monthly?.currentOrders||0,trend:12,icon:Ae,colorClass:"bg-blue-50 text-blue-600"}),n.jsx(W,{title:"Cancelled Orders",value:s.monthly?.cancelled||0,trend:-5,icon:na,colorClass:"bg-red-50 text-red-600"}),n.jsx(W,{title:"Returned Orders",value:s.monthly?.returned||0,trend:-5,icon:je,colorClass:"bg-yellow-50 text-yellow-600"})]}),n.jsx("div",{className:"mb-8",children:n.jsx(_a,{data:v,filter:l,onFilterChange:i})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[n.jsx(Z,{title:"Best Selling Products",data:c||[],type:"product"}),n.jsx(Z,{title:"Best Selling Categories",data:u||[],type:"category"})]})]})};export{Ka as default};
