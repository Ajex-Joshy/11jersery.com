import{a as n,u as i,i as c,k as o,z as s}from"./index-BqlAPq8n.js";const d=async()=>{const{data:e}=await n.get("/account/profile");return e},l=async e=>{const{data:a}=await n.patch("/account/update-details",e);return a},p=async e=>{const{data:a}=await n.patch("/account/update-password",e);return a},y=async({newEmail:e})=>{const{data:a}=await n.post("/account/request-email-otp",{newEmail:e});return a},m=async e=>{const{data:a}=await n.post("/account/verify-email-otp",{otp:e});return a},r=["userProfile"],P=()=>i({queryKey:r,queryFn:d,staleTime:1e3*60*15}),w=()=>{const e=c();return o({mutationFn:l,onMutate:async a=>{await e.cancelQueries(r);const u=e.getQueryData(r);return e.setQueryData(r,t=>t?.data?{...t,data:{...t.data,...a}}:t),{previousData:u}},onError:(a,u,t)=>{t?.previousData&&e.setQueryData(r,t.previousData),s.error(a?.response?.data?.error?.message||"Failed to update details")},onSuccess:a=>{s.success("Personal details updated successfully"),e.setQueryData(r,a?.json)}})},E=()=>o({mutationFn:p,onSuccess:()=>{s.success("Password updated successfully")},onError:e=>{s.error(e?.response?.data?.error?.message||"Failed to update password")}}),D=()=>o({mutationFn:y,onSuccess:()=>{s.success("OTP sent to your new email")},onError:e=>{s.error(e?.response?.data?.error?.message||"Failed to send OTP")}}),F=()=>{const e=c();return o({mutationFn:m,onSuccess:()=>{s.success("Email updated successfully"),e.invalidateQueries(r)},onError:a=>{s.error(a?.response?.data?.error?.message||"Invalid OTP")}})};export{w as a,D as b,F as c,E as d,P as u};
